---
title: Python으로 푸는 프로그래머스 level_2. 괄호 변환

excerpt: 카카오에 신입 개발자로 입사한 콘은 선배 개발자로부터 개발역량 강화를 위해 다른 개발자가 작성한 소스 코드를 분석하여 문제점을 발견하고 수정하라는 업무 과제를 받았습니다. 소스를 컴파일하여 로그를 보니 대부분 소스 코드 내 작성된 괄호가 개수는 맞지만 짝이 맞지 않은 형태로 작성되어 오류가 나는 것을 알게 되었습니다. 수정해야 할 소스 파일이 너무 많아서 고민하던 콘은 소스 코드에 작성된 모든 괄호를 뽑아서 올바른 순서대로 배치된 괄호 문자열을 알려주는 프로그램을 다음과 같이 개발하려고 합니다.

categories:
  - codingTest

tags:
  - Programmers
  - 2020 KAKAO
  - Python

date: 2020-07-04
last_modified_at: 2020-08-03
use_math: true
toc: true # Show table of contents
toc_sticky: true # Fixed table of contents
---



`Tag` `2020 KAKAO BLIND RECRUITMENT`<br>


**문제 설명**

카카오에 신입 개발자로 입사한 콘은 선배 개발자로부터 개발역량 강화를 위해 다른 개발자가 작성한 소스 코드를 분석하여 문제점을 발견하고 수정하라는 업무 과제를 받았습니다. 소스를 컴파일하여 로그를 보니 대부분 소스 코드 내 작성된 괄호가 개수는 맞지만 짝이 맞지 않은 형태로 작성되어 오류가 나는 것을 알게 되었습니다.
수정해야 할 소스 파일이 너무 많아서 고민하던 콘은 소스 코드에 작성된 모든 괄호를 뽑아서 올바른 순서대로 배치된 괄호 문자열을 알려주는 프로그램을 다음과 같이 개발하려고 합니다.

**용어의 정의**

'(' 와 ')' 로만 이루어진 문자열이 있을 경우, '(' 의 개수와 ')' 의 개수가 같다면 이를 ```균형잡힌 괄호 문자열``` 이라고 부릅니다.
그리고 여기에 '('와 ')'의 괄호의 짝도 모두 맞을 경우에는 이를 ```올바른 괄호 문자열``` 이라고 부릅니다.
예를 들어, ```"(()))("``` 와 같은 문자열은 균형잡힌 괄호 문자열 이지만 올바른 괄호 문자열은 아닙니다.
반면에 ```"(())()"``` 와 같은 문자열은 균형잡힌 괄호 문자열 이면서 동시에 올바른 괄호 문자열 입니다.

'(' 와 ')' 로만 이루어진 문자열 w가 균형잡힌 괄호 문자열 이라면 다음과 같은 과정을 통해 올바른 괄호 문자열로 변환할 수 있습니다.

    1. 입력이 빈 문자열인 경우, 빈 문자열을 반환합니다.
    2. 문자열 w를 두 "균형잡힌 괄호 문자열" u, v로 분리합니다. 단, u는 "균형잡힌 괄호 문자열"로 더 이상 분리할 수 없어야 하며, v는 빈 문자열이 될 수 있습니다.
    3. 문자열 u가 "올바른 괄호 문자열" 이라면 문자열 v에 대해 1단계부터 다시 수행합니다.
      3-1. 수행한 결과 문자열을 u에 이어 붙인 후 반환합니다.
    4. 문자열 u가 "올바른 괄호 문자열"이 아니라면 아래 과정을 수행합니다.
      4-1. 빈 문자열에 첫 번째 문자로 '('를 붙입니다.
      4-2. 문자열 v에 대해 1단계부터 재귀적으로 수행한 결과 문자열을 이어 붙입니다.
      4-3. ')'를 다시 붙입니다.
      4-4. u의 첫 번째와 마지막 문자를 제거하고, 나머지 문자열의 괄호 방향을 뒤집어서 뒤에 붙입니다.
      4-5. 생성된 문자열을 반환합니다.
균형잡힌 괄호 문자열 p가 매개변수로 주어질 때, 주어진 알고리즘을 수행해 올바른 괄호 문자열로 변환한 결과를 return 하도록 solution 함수를 완성해 주세요.

**매개변수 설명**

- p는 '(' 와 ')' 로만 이루어진 문자열이며 길이는 2 이상 1,000 이하인 짝수입니다.
- 문자열 p를 이루는 '(' 와 ')' 의 개수는 항상 같습니다.
- 만약 p가 이미 올바른 괄호 문자열이라면 그대로 return 하면 됩니다.

**입출력 예**

p	|result
--|--
"(()())()"|	"(()())()"
")("|	"()"
"()))((()"	|"()(())()"

**입출력 예에 대한 설명**

**입출력 예 #1**

이미 올바른 괄호 문자열 입니다.

**입출력 예 #2**

- 두 문자열 u, v로 분리합니다.
  - u = ```")("```
  - v = ```""```
- u가 올바른 괄호 문자열이 아니므로 다음과 같이 새로운 문자열을 만듭니다.
  - v에 대해 1단계부터 재귀적으로 수행하면 빈 문자열이 반환됩니다.
  - u의 앞뒤 문자를 제거하고, 나머지 문자의 괄호 방향을 뒤집으면 ```""``` 이 됩니다.
따라서 생성되는 문자열은 ```"("``` + ```""``` + ```")"``` + ```""``` 이며, 최종적으로 ```"()"```로 변환됩니다.

**입출력 예 #3**

- 두 문자열 u, v로 분리합니다.
  - u = ```"()"```
  - v = ```"))((()"```
- 문자열 u가 올바른 괄호 문자열이므로 그대로 두고, v에 대해 재귀적으로 수행합니다.
- 다시 두 문자열 u, v로 분리합니다.
  - u = ```"))(("```
  - v = ```"()"```
- u가 올바른 괄호 문자열이 아니므로 다음과 같이 새로운 문자열을 만듭니다.
  - v에 대해 1단계부터 재귀적으로 수행하면 ```"()"``` 이 반환됩니다.
  - u의 앞뒤 문자를 제거하고, 나머지 문자의 괄호 방향을 뒤집으면 ```"()"``` 이 됩니다.
  - 따라서 생성되는 문자열은 ```"("``` + ```"()"``` + ```")"``` + ```"()"``` 이며, 최종적으로 ```"(())()"``` 를 반환합니다.
- 처음에 그대로 둔 문자열에 반환된 문자열을 이어 붙이면 ```"()"``` + ```"(())()"``` = ```"()(())()"``` 가 됩니다.

[프로그래머스에서 풀기](https://programmers.co.kr/learn/courses/30/lessons/60058)

## 코드
```python

def create_u_v(p):

    left_p = []
    right_p = []
    if ''==p:
        return ('','')
    for idx, target in enumerate(p):
        if target == "(":
            left_p.append(target)
        else:
            right_p.append(target)
        if len(left_p) == len(right_p):
            return (p[:idx + 1], p[idx + 1:])


def isCorrect(p):
    isCorrect=True
    p_check = []  
    for target in p:
        if "(" == target:
            p_check.append(target)
        else:
            if p_check:
                p_check.pop()

    if p_check:  
        isCorrect=False


    return isCorrect


def solution(p):

    u, v = create_u_v(p)
    if ''==u and ''==v :
        return ''

    elif isCorrect(u) :  
        return u+solution(v)

    else:  
        new_u=''
        for idx, target in enumerate(u):
            if 0 != idx and len(u)-1 !=idx:
                if '(' == target:
                    new_u+= ')'
                else:
                    new_u+='('

        return '('+solution(v)+')'+new_u
```

## 설명

```python
def create_u_v(p):

    left_p = []
    right_p = []
    if ''==p:
        return ('','')
    for idx, target in enumerate(p):
        if target == "(":
            left_p.append(target)
        else:
            right_p.append(target)
        if len(left_p) == len(right_p):
            return (p[:idx + 1], p[idx + 1:])  

```
- ```create_u_v()``` 는 주어진 ```p```를  ```u```, ```v```로 분리한다.
- 재귀호출 후 마지막에 도달해서 빈 문자열이 주어질경우 ```u=''```,```v=''```를 반환한다.
- ```u```는 **균형 잡힌 괄호 문자열** 을 생성해야 하므로 왼쪽 괄호 ```left_p``` 와 오른쪽 괄호 ```right_p```를 체크해서 길이가 같아지는 경우에 ```u```,```v```를 반환한다.

```python
def isCorrect(p):
    isCorrect=True
    p_check = []  
    for target in p:
        if "(" == target:
            p_check.append(target)
        else:
            if p_check:
                p_check.pop()

    if p_check:  
        isCorrect=False


    return isCorrect
```
- ```isCorrect()```는 **균형잡힌 괄호 문자열** 인지 **올바른 괄호 문자열** 인지 체크한다.
- ```"("```를 ```p_check``` 스택에 담아둔 후 ```")"``` 일 때마다 ```pop()```을 한다. 만약 ```p_check```에 값이 남아 있는 경우 **균형잡힌 괄호 문자열** 이고, 남아 있지 않은 경우에는 **올바른 괄호 문자열** 이다.

```python
def solution(p):

    u, v = create_u_v(p) # Step2
    if ''==u and ''==v : #탈출조건
        return ''

    elif isCorrect(u) :  # Step3: 올바른 문자열이었다면
        return u+solution(v) # Step3-1 u는 그대로 두고 v에대해서 재귀적으로 실행

    else:  # Step4: 올바른 문자열이 아니었다면
        new_u='' # 새로운 방식으로 u를 생성
        for idx, target in enumerate(u):
            if 0 != idx and len(u)-1 !=idx:  # 첫번째 문자 와 마지막문자 제거
                # Step 4-4
                if '(' == target:
                    new_u+= ')'
                else:
                    new_u+='('

        return '('+solution(v)+')'+new_u #Step4-1,4-2,4-3,4-4
```
- **Step 2.** ```create_u_v()```를 통해 ```u```,```v```로 분리한다.
- **Step 1.** ```u```,```v``` 가 빈 문자열일 경우 재귀호출을 탈출할수 있도록 한다.
- **Step 3.** ```isCorrect()``` 를 통해 ```올바른 괄호 문자열``` 인 경우를 체크한다.
- **Step 3-1** **올바른 괄호 문자열일 경우**  ```u```는 그대로 두고 ```v```에 대해서 재귀 호출 실행한다.
- **Step 4.** **올바른 괄호 문자열이 아닐 경우**  ```new_u```를 생성한다.
- **Step 4-1, 4-2, 4-3, 4-4.** 첫번째문자와 마지막 문자를 제거하고 주어진 방식대로 새로운 괄호 문자열을 생성한다.
